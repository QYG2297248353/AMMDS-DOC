---
sidebar_position: 1
sidebar_label: "创建扫描任务"
---

# 创建扫描任务

在正式刮削之前，需要先创建一个扫描任务。扫描任务会根据扫描规则，对目标目录下的文件进行扫描，生成一个扫描结果文件。用户可以根据扫描结果文件，决定对哪些文件进行刮削。而不是对所有文件都进行刮削。很大程度上可以提高刮削效率。以及规避一些垃圾文件的刮削。

<!-- truncate -->

在后台页面 任务管理 >> 任务配置 >> 任务列表 中，点击 创建任务 按钮，即可创建一个扫描任务。

你可以根据自己的需求，配置多个不同的扫描任务。每个任务可以有不同的扫描目录和输出目录。

多个扫描任务有助于对影视文件进行分类和管理。例如，你可以创建一个扫描任务，扫描一种类型的影视文件（如日产），并将其输出到一个指定的目录。而另一个扫描任务，则可以扫描另一种类型的影视文件（如欧美），并将其输出到另一个目录。

## 创建扫描任务

![创建扫描任务](/img/usage/scrape/task-scan-01.png)

任务名称：扫描任务的名称。用户可以根据自己的需求，自定义任务名称。

媒体类型：扫描任务的媒体类型。辅助系统识别番号，提高番号识别率。如果是混合类型的影视文件选择全部即可。

整理模式：- 原地整理：
整理时，不对父目录进行任何操作。直接在原始文件所在目录进行整理。- 移动模式：
整理时，会将文件移动到目标目录。目标目录是刮削配置中配置的格式。- 复制模式：
整理时，会将文件复制到目标目录。目标目录是刮削配置中配置的格式。- 软链接模式：
整理时，会创建文件的软链接到目标目录。目标目录是刮削配置中配置的格式。
软链接模式下，不会占用额外的磁盘空间。但是，软链接文件是一个指向原始文件的指针。如果原始文件被删除或移动，软链接文件将变得无效。- 硬链接模式：
整理时，会创建文件的硬链接到目标目录。目标目录是刮削配置中配置的格式。
硬链接模式下，会占用额外的磁盘空间。但是，硬链接文件是一个指向原始文件的指针。如果原始文件被删除或移动，硬链接文件将保持有效。
但是，硬链接文件只能在同一文件系统中创建。如果目标目录和原始文件所在目录不在同一文件系统中，硬链接模式将无法使用。该方式硬性条件很高，一般不建议使用。
除了原地整理模式，其他整理模式都需要指定目标目录。

扫描目录：扫描任务的目标目录。用户需要指定一个目录，系统会递归扫描该目录下的所有文件。

整理目录：除了原地整理模式，其他整理模式都需要指定一个目标目录。用户需要指定一个目录，系统会将文件整理到该目录下。

重命名规则：- 原文件名：
整理时，会保持原始文件名不变。- 标准化文件名：
整理时，系统会根据刮削配置中配置的文件名格式，对文件名进行标准化。命名取决于刮削配置中配置的文件名格式。

重复文件处理：针对目标文件已存在的情况，如何进行处理。

目录监控：开启后，在首次初始化扫描任务后，系统会监控此目录，当出现新增文件时，会自动进行扫描文件并添加到扫描结果文件中。

加入收藏：开启后，整理后是否收藏此影视元数据。

计划任务：(此项与目录监控冲突，只可选择其一)
此处填写的是 crontab 表达式。用于指定计划任务的执行时间。 例如，每小时执行一次扫描任务，填写 `0 0 * * * ?`。

## 执行扫描任务

创建完成后，点击 立即扫描 按钮，即可执行扫描任务。

![执行扫描任务](/img/usage/scrape/task-scan-02.png)

编辑：点击 编辑 按钮，即可编辑扫描任务。

记录：点击 记录 按钮，即可查看扫描任务的执行记录。

删除：点击 删除 按钮，即可删除扫描任务。

扫描结束后，新增的可刮削文件请前往 任务管理 >> 刮削入库 中进行查看

## 计划任务

项目使用 Spring 风格的 cron 表达式。用于指定计划任务的执行时间。

### 常用表达式
