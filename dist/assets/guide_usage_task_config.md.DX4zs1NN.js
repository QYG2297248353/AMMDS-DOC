import{_ as r,C as a,c,o as s,ad as e,G as o}from"./chunks/framework.DtW8lrcE.js";const m=JSON.parse('{"title":"任务配置","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/usage/task/config.md","filePath":"guide/usage/task/config.md","lastUpdated":1754542962000}'),l={name:"guide/usage/task/config.md"};function i(n,t,h,u,p,b){const d=a("a-image");return s(),c("div",null,[t[0]||(t[0]=e('<h1 id="任务配置" tabindex="-1">任务配置 <a class="header-anchor" href="#任务配置" aria-label="Permalink to &quot;任务配置&quot;">​</a></h1><p>执行后台任务的一些默认配置</p><h2 id="任务列表" tabindex="-1">任务列表 <a class="header-anchor" href="#任务列表" aria-label="Permalink to &quot;任务列表&quot;">​</a></h2><p>展示已经创建的扫描任务，以及当前任务状态</p><h3 id="创建扫描任务" tabindex="-1">创建扫描任务 <a class="header-anchor" href="#创建扫描任务" aria-label="Permalink to &quot;创建扫描任务&quot;">​</a></h3><p>建议针对不同目录，创建不同任务类型。</p>',6)),o(d,{style:{"border-radius":"12px"},src:"/images/usage/task-config-001.png"}),o(d,{style:{"border-radius":"12px"},src:"/images/usage/task-config-002.png"}),t[1]||(t[1]=e('<table tabindex="0"><thead><tr><th>字段名称</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>任务名称</td><td>简单描述任务概况</td><td>必填项</td></tr><tr><td>媒体类型</td><td>选择媒体的类型</td><td>必填项</td></tr><tr><td>整理模式</td><td>选择整理文件的方式</td><td>必填项</td></tr><tr><td>整理模式-选项</td><td></td><td></td></tr><tr><td>- 标准化整理(移动)</td><td>将文件移动到指定位置</td><td>该选项需要设置目标目录</td></tr><tr><td>- 标准化整理(复制)</td><td>将文件复制到指定位置</td><td>该选项需要设置目标目录</td></tr><tr><td>- 标准化整理(软连接)</td><td>创建文件的软链接到指定位置</td><td>该选项需要设置目标目录</td></tr><tr><td>- 标准化整理(硬连接)</td><td>创建文件的硬链接到指定位置</td><td>该选项需要设置目标目录</td></tr><tr><td>- 原地整理</td><td>在原位置进行整理</td><td></td></tr><tr><td>扫描目录</td><td>选择需要扫描的目录</td><td>必填项</td></tr><tr><td>整理目录</td><td>选择整理后的文件存放目录</td><td>非原地整理必填</td></tr><tr><td>重命名规则</td><td>选择文件重命名的规则</td><td>必填项</td></tr><tr><td>重复文件处理规则</td><td>选择如何处理重复文件</td><td>必填项</td></tr><tr><td>目录监控</td><td>开启或关闭目录监控</td><td>监控开启后，不支持手动运行任务</td></tr><tr><td>加入收藏</td><td>开启后，扫描到的影视将在刮削后加入收藏列表</td><td>可选项</td></tr><tr><td>计划任务</td><td>可填写 spring 风格 cron 表达式</td><td>可选项，用于设置定时任务</td></tr></tbody></table><h3 id="目录监控说明" tabindex="-1">目录监控说明 <a class="header-anchor" href="#目录监控说明" aria-label="Permalink to &quot;目录监控说明&quot;">​</a></h3><ul><li><strong>开启</strong>：实时目录监控，消耗资源较大，并且不支持手动运行任务。</li><li><strong>关闭</strong>：支持定时执行与手动执行。</li></ul><h3 id="计划任务说明" tabindex="-1">计划任务说明 <a class="header-anchor" href="#计划任务说明" aria-label="Permalink to &quot;计划任务说明&quot;">​</a></h3><ul><li>可填写 spring 风格 cron 表达式，用于设置定时任务。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    说明：</span></span>\n<span class="line"><span>    Java(Spring)</span></span>\n<span class="line"><span>    *    *    *    *    *    *</span></span>\n<span class="line"><span>    -    -    -    -    -    -</span></span>\n<span class="line"><span>    |    |    |    |    |    |</span></span>\n<span class="line"><span>    |    |    |    |    |    +----- day of week (0 - 7) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span>\n<span class="line"><span>    |    |    |    |    +---------- month (1 - 12) OR jan,feb,mar,apr ...</span></span>\n<span class="line"><span>    |    |    |    +--------------- day of month (1 - 31)</span></span>\n<span class="line"><span>    |    |    +-------------------- hour (0 - 23)</span></span>\n<span class="line"><span>    |    +------------------------- min (0 - 59)</span></span>\n<span class="line"><span>    +------------------------------ second (0 - 59)</span></span></code></pre></div><h3 id="常见-cron-表达式" tabindex="-1">常见 Cron 表达式 <a class="header-anchor" href="#常见-cron-表达式" aria-label="Permalink to &quot;常见 Cron 表达式&quot;">​</a></h3><table tabindex="0"><thead><tr><th>表达式</th><th>说明</th></tr></thead><tbody><tr><td><code>0 * * * * *</code></td><td>每分钟的 0 秒执行一次</td></tr><tr><td><code>0 0 * * * *</code></td><td>每小时的 0 分 0 秒执行一次</td></tr><tr><td><code>0 0 12 * * *</code></td><td>每天中午 12:00:00 执行一次</td></tr><tr><td><code>0 30 10 * * *</code></td><td>每天上午 10:30:00 执行一次</td></tr><tr><td><code>0 0 0 * * *</code></td><td>每天午夜 00:00:00 执行一次</td></tr><tr><td><code>0 0 8 * * mon</code></td><td>每周一上午 8:00:00 执行一次</td></tr><tr><td><code>0 0 8 1 * *</code></td><td>每月 1 号上午 8:00:00 执行一次</td></tr><tr><td><code>0 0 0 1 1 *</code></td><td>每年 1 月 1 日 00:00:00 执行一次</td></tr><tr><td><code>0 0 12 */2 * *</code></td><td>每隔 2 天的中午 12:00:00 执行一次</td></tr><tr><td><code>0 0 12 * jan,feb *</code></td><td>每年 1 月和 2 月的每天 12:00:00 执行一次</td></tr><tr><td><code>0 0 9-17 * * *</code></td><td>每天 9:00 到 17:00 之间每小时执行一次</td></tr><tr><td><code>0 */15 * * * *</code></td><td>每 15 分钟执行一次</td></tr><tr><td><code>0 0 9-17/2 * * *</code></td><td>每天 9:00-17:00 之间每 2 小时执行一次</td></tr><tr><td><code>0 0 22 * * 1-5</code></td><td>每周一到周五晚上 22:00:00 执行一次</td></tr></tbody></table><h3 id="特殊字符说明" tabindex="-1">特殊字符说明 <a class="header-anchor" href="#特殊字符说明" aria-label="Permalink to &quot;特殊字符说明&quot;">​</a></h3><ul><li><code>*</code>（星号）：匹配所有可能值</li><li><code>,</code>（逗号）：枚举多个值，例如 <code>mon,wed,fri</code> 表示星期一、三、五执行</li><li><code>-</code>（减号）：定义范围，例如 <code>9-17</code> 表示从 9 点到 17 点</li><li><code>/</code>（斜杠）：步进，例如 <code>*/15</code> 表示每 15 分钟执行一次</li><li><code>?</code>（问号）：仅用于“日期”和“星期”字段，表示忽略该字段</li><li><code>L</code>（最后）：用于“日期”和“星期”字段，例如 <code>L</code> 表示月末最后一天，<code>5L</code> 表示该月最后一个星期五</li><li><code>W</code>（工作日）：如 <code>15W</code> 表示本月 15 号的最近工作日</li><li><code>#</code>（指定第几个星期几）：如 <code>2#1</code> 表示当月第一个星期二</li></ul><h2 id="扫描规则配置" tabindex="-1">扫描规则配置 <a class="header-anchor" href="#扫描规则配置" aria-label="Permalink to &quot;扫描规则配置&quot;">​</a></h2><p>扫描时遵循的扫描规则</p><table tabindex="0"><thead><tr><th>配置项</th><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>格式限制</td><td>.mp4, .avi, .rmvb, .wmv, .mov, .mkv, .flv, .ts, .webm, .iso, .mpg</td><td>允许处理的文件格式，已选择所有列出的格式</td></tr><tr><td>忽略目录</td><td>behind the scenes, deleted scenes, interviews, scenes, samples, shorts, featurettes, clips, other, extras, trailers</td><td>指定在扫描过程中需要忽略的目录类型</td></tr><tr><td>分段标记</td><td>cd, dvd, part, pt, disc, disk</td><td>指定文件名中包含的分段标记</td></tr><tr><td>字幕格式</td><td>.srt, .sub, .ssa, .ass</td><td>允许处理的字幕文件格式</td></tr><tr><td>最小视频大小</td><td>100 MB</td><td>设置处理的视频文件的最小大小限制</td></tr></tbody></table><h3 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><ul><li><strong>格式限制</strong>：用户可以选择软件支持处理的视频和图像文件格式。</li><li><strong>忽略目录</strong>：用户可以指定在扫描过程中需要忽略的特定类型的目录，以避免不必要的文件被处理。</li><li><strong>分段标记</strong>：用户可以指定文件名中可能包含的分段标记，这些标记通常用于区分视频的不同部分。</li><li><strong>字幕格式</strong>：用户可以选择软件支持处理的字幕文件格式。</li><li><strong>最小视频大小</strong>：用户可以设置一个最小视频大小的阈值，只有大于或等于这个大小的视频文件才会被处理。</li></ul><h2 id="刮削规则配置" tabindex="-1">刮削规则配置 <a class="header-anchor" href="#刮削规则配置" aria-label="Permalink to &quot;刮削规则配置&quot;">​</a></h2><p>刮削并整理时遵循的扫描规则</p><table tabindex="0"><thead><tr><th>配置项</th><th>当前值</th><th>描述</th></tr></thead><tbody><tr><td>字符过滤</td><td>h_720, 2048 论坛@fun2048.com, 1080p, 720p, 22-shtime, -HD, bbs2048.org, hhd800.com, icao.me, hhb_000, [456k.me], [Th2u.Cc]</td><td>设置需要过滤的字符或字符串，防止这些字符出现在文件名中</td></tr><tr><td>允许图片下载失败</td><td>关闭</td><td>是否允许在图片下载失败时继续执行任务</td></tr><tr><td>整理目录格式</td><td><code>${actor}/${number}</code></td><td>设置整理后的目录格式，使用变量 <code>${actor}</code> 表示演员，<code>${number}</code> 表示编号</td></tr><tr><td>整理文件名格式</td><td><code>${number}</code></td><td>设置整理后的文件名格式，使用变量 <code>${number}</code> 表示编号</td></tr><tr><td>自动刮削</td><td>关闭</td><td>是否开启自动刮削功能，自动执行尚未完成的刮削整理媒体</td></tr><tr><td>本地模式</td><td>关闭</td><td>跳过MetaTube强制性检查</td></tr><tr><td>高清封面 (DMM 2K)</td><td>关闭</td><td>支持获取高清封面</td></tr></tbody></table><h3 id="配置说明-1" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明-1" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><ul><li><strong>字符过滤</strong>：用户可以指定一系列需要过滤的字符或字符串，这些字符将不会出现在处理后的文件名中。</li><li><strong>允许图片下载失败</strong>：用户可以选择是否允许在图片下载失败时继续执行任务。</li><li><strong>整理目录格式</strong>：用户可以设置整理后的目录格式，支持以下变量：</li></ul><table tabindex="0"><thead><tr><th>变量名</th><th>安全变量名</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>${actor}</code></td><td><code>${actor_safe}</code></td><td>演员名称</td><td>&quot;John Smith&quot;</td></tr><tr><td><code>${number}</code></td><td><code>${number_safe}</code></td><td>影片编号</td><td>&quot;ABC-123&quot;</td></tr><tr><td><code>${title}</code></td><td><code>${title_safe}</code></td><td>影片标题</td><td>&quot;Sample Title&quot;</td></tr><tr><td><code>${date}</code></td><td><code>${date_safe}</code></td><td>发行日期</td><td>&quot;2024/01/01&quot;</td></tr><tr><td><code>${year}</code></td><td><code>${year_safe}</code></td><td>发行年份</td><td>&quot;2024&quot;</td></tr><tr><td><code>${month}</code></td><td><code>${month_safe}</code></td><td>发行月份</td><td>&quot;01&quot;</td></tr><tr><td><code>${day}</code></td><td><code>${day_safe}</code></td><td>发行日期</td><td>&quot;01&quot;</td></tr><tr><td><code>${mosaic}</code></td><td><code>${mosaic_safe}</code></td><td>马赛克类型</td><td>&quot;无码/有码&quot;</td></tr><tr><td><code>${resolution}</code></td><td><code>${resolution_safe}</code></td><td>视频分辨率</td><td>&quot;1080p/720p&quot;</td></tr><tr><td><code>${director}</code></td><td><code>${director_safe}</code></td><td>导演名称</td><td>&quot;Director Name&quot;</td></tr><tr><td><code>${studio}</code></td><td><code>${studio_safe}</code></td><td>制作商名称</td><td>&quot;Studio Name&quot;</td></tr></tbody></table><ul><li><strong>整理文件名格式</strong>：用户可以设置整理后的文件名格式，支持以下变量：</li></ul><table tabindex="0"><thead><tr><th>变量名</th><th>安全变量名</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>${actor}</code></td><td><code>${actor_safe}</code></td><td>演员名称</td><td>&quot;John Smith&quot;</td></tr><tr><td><code>${number}</code></td><td><code>${number_safe}</code></td><td>影片编号</td><td>&quot;ABC-123&quot;</td></tr><tr><td><code>${title}</code></td><td><code>${title_safe}</code></td><td>影片标题</td><td>&quot;Sample Title&quot;</td></tr><tr><td><code>${date}</code></td><td><code>${date_safe}</code></td><td>发行日期</td><td>&quot;2024/01/01&quot;</td></tr><tr><td><code>${year}</code></td><td><code>${year_safe}</code></td><td>发行年份</td><td>&quot;2024&quot;</td></tr><tr><td><code>${month}</code></td><td><code>${month_safe}</code></td><td>发行月份</td><td>&quot;01&quot;</td></tr><tr><td><code>${day}</code></td><td><code>${day_safe}</code></td><td>发行日期</td><td>&quot;01&quot;</td></tr><tr><td><code>${mosaic}</code></td><td><code>${mosaic_safe}</code></td><td>马赛克类型</td><td>&quot;无码/有码&quot;</td></tr><tr><td><code>${resolution}</code></td><td><code>${resolution_safe}</code></td><td>视频分辨率</td><td>&quot;1080p/720p&quot;</td></tr><tr><td><code>${director}</code></td><td><code>${director_safe}</code></td><td>导演名称</td><td>&quot;Director Name&quot;</td></tr><tr><td><code>${studio}</code></td><td><code>${studio_safe}</code></td><td>制作商名称</td><td>&quot;Studio Name&quot;</td></tr></tbody></table><ul><li><strong>自动刮削</strong>：用户可以选择是否开启自动刮削功能，自动从数据库中获取并更新媒体信息。</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><p>整理目录格式和文件名格式支持多级目录结构，可以根据需要组合使用变量。</p><ul><li>例如： <code>${actor}/${title} (${year})</code> 可以生成 <code>John Smith/Inception (2010)</code> 这样的目录结构。</li></ul><h3 id="安全变量" tabindex="-1">安全变量 <a class="header-anchor" href="#安全变量" aria-label="Permalink to &quot;安全变量&quot;">​</a></h3><ul><li>安全变量是为了防止变量在目录名或文件名中包含特殊字符导致的问题而设计的。</li><li>安全变量的格式为 <code>${变量名_safe}</code>，例如 <code>${actor_safe}</code>。</li><li>安全变量会自动将特殊字符替换为空格，确保文件名的合法性。</li></ul></div><h2 id="订阅规则配置" tabindex="-1">订阅规则配置 <a class="header-anchor" href="#订阅规则配置" aria-label="Permalink to &quot;订阅规则配置&quot;">​</a></h2><p>媒体订阅相关的配置</p><table tabindex="0"><thead><tr><th>配置项</th><th>当前值</th><th>描述</th></tr></thead><tbody><tr><td>中字优先</td><td>关闭</td><td>是否优先下载包含中文字幕的媒体文件</td></tr><tr><td>搜索顺序</td><td>M-Team,FSM</td><td>指定搜索站点排序</td></tr><tr><td>下载目录</td><td>无</td><td>指定订阅下载的媒体文件的存放位置</td></tr></tbody></table><h3 id="配置说明-2" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明-2" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><ul><li><strong>中字优先</strong>：用户可以选择是否优先下载包含中文字幕的媒体文件。</li><li><strong>搜索顺序</strong>：用户可以指定允许进行媒体订阅操作的用户组。</li><li><strong>下载目录</strong>：用户可以设置订阅下载的媒体文件的存放位置，不存在时将已下载器配置为主。</li></ul><h2 id="漫画整理配置" tabindex="-1">漫画整理配置 <a class="header-anchor" href="#漫画整理配置" aria-label="Permalink to &quot;漫画整理配置&quot;">​</a></h2><p>漫画文件的整理配置规则</p><table tabindex="0"><thead><tr><th>配置项</th><th>当前值</th><th>描述</th></tr></thead><tbody><tr><td>默认整理目录</td><td><code>data/comic</code></td><td>默认的漫画整理目录</td></tr><tr><td>整理目录格式</td><td><code>${author}/${title} (${year})</code></td><td>设置整理后的目录格式</td></tr><tr><td>整理文件名格式</td><td><code>${chapter} #${index} (${year})</code></td><td>设置整理后的文件名格式</td></tr><tr><td>是否按照章节生成</td><td>关闭</td><td>是否按照章节生成文件</td></tr></tbody></table><h3 id="配置说明-3" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明-3" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><ul><li><strong>默认整理目录</strong>：用户可以设置默认的漫画整理目录。</li><li><strong>整理目录格式</strong>：用户可以设置整理后的目录格式，支持以下变量：</li></ul><table tabindex="0"><thead><tr><th>变量名</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>${title}</code></td><td>漫画名称</td><td>&quot;漫画标题&quot;</td></tr><tr><td><code>${author}</code></td><td>作者名称</td><td>&quot;作者名&quot;</td></tr><tr><td><code>${date}</code></td><td>发布日期</td><td>&quot;2024/01/01&quot;</td></tr><tr><td><code>${year}</code></td><td>发布年份</td><td>&quot;2024&quot;</td></tr><tr><td><code>${month}</code></td><td>发布月份</td><td>&quot;01&quot;</td></tr><tr><td><code>${day}</code></td><td>发布日期</td><td>&quot;01&quot;</td></tr><tr><td><code>${chapter}</code></td><td>章节名称</td><td>&quot;第一话&quot;</td></tr><tr><td><code>${index}</code></td><td>章节序号</td><td>&quot;001&quot;</td></tr></tbody></table><ul><li><strong>整理文件名格式</strong>：用户可以设置整理后的文件名格式，支持以下变量：</li></ul><table tabindex="0"><thead><tr><th>变量名</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>${title}</code></td><td>漫画名称</td><td>&quot;漫画标题&quot;</td></tr><tr><td><code>${author}</code></td><td>作者名称</td><td>&quot;作者名&quot;</td></tr><tr><td><code>${date}</code></td><td>发布日期</td><td>&quot;2024/01/01&quot;</td></tr><tr><td><code>${year}</code></td><td>发布年份</td><td>&quot;2024&quot;</td></tr><tr><td><code>${month}</code></td><td>发布月份</td><td>&quot;01&quot;</td></tr><tr><td><code>${day}</code></td><td>发布日期</td><td>&quot;01&quot;</td></tr><tr><td><code>${chapter}</code></td><td>章节名称</td><td>&quot;第一话&quot;</td></tr><tr><td><code>${index}</code></td><td>章节序号</td><td>&quot;001&quot;</td></tr></tbody></table><ul><li><strong>是否按照章节生成</strong>：用户可以选择是否按照章节生成文件。</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><p>整理目录格式和文件名格式支持多级目录结构，可以根据需要组合使用变量。</p></div><h2 id="刮削代理配置" tabindex="-1">刮削代理配置 <a class="header-anchor" href="#刮削代理配置" aria-label="Permalink to &quot;刮削代理配置&quot;">​</a></h2><p>该配置影响全局外网的网络代理</p><table tabindex="0"><thead><tr><th>配置项</th><th>当前值</th><th>描述</th></tr></thead><tbody><tr><td>开启代理</td><td>关闭</td><td>是否启用代理设置</td></tr><tr><td>代理协议</td><td>http</td><td>指定使用的代理协议类型 (http/socks)</td></tr><tr><td>代理主机</td><td></td><td>输入代理服务器的主机名或 IP 地址</td></tr><tr><td>代理端口</td><td>0</td><td>输入代理服务器的端口号</td></tr><tr><td>代理用户名</td><td></td><td>输入代理服务器的用户名</td></tr><tr><td>代理密码</td><td></td><td>输入代理服务器的密码</td></tr></tbody></table><h3 id="配置说明-4" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明-4" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><ul><li><strong>开启代理</strong>：用户可以选择是否启用代理设置。当前设置为关闭状态。</li><li><strong>代理协议</strong>：用户需要指定使用的代理协议类型，如 HTTP、HTTPS 等。当前设置为 HTTP。</li><li><strong>代理主机</strong>：用户需要输入代理服务器的主机名或 IP 地址。</li><li><strong>代理端口</strong>：用户需要输入代理服务器的端口号。默认端口号为 0，通常需要更改为代理服务器的实际端口号。</li><li><strong>代理用户名</strong>：如果代理服务器需要身份验证，用户需要输入代理服务器的用户名。</li><li><strong>代理密码</strong>：如果代理服务器需要身份验证，用户需要输入代理服务器的密码。</li></ul>',45))])}const g=r(l,[["render",i]]);export{m as __pageData,g as default};
