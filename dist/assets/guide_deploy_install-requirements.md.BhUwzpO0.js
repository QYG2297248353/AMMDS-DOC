import{_ as i,c as a,o as t,ad as e}from"./chunks/framework.DtW8lrcE.js";const c=JSON.parse('{"title":"需求说明","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/deploy/install-requirements.md","filePath":"guide/deploy/install-requirements.md","lastUpdated":1749699763000}'),l={name:"guide/deploy/install-requirements.md"};function n(h,s,p,r,d,k){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="需求说明" tabindex="-1">需求说明 <a class="header-anchor" href="#需求说明" aria-label="Permalink to &quot;需求说明&quot;">​</a></h1><p>应用部署前的检查</p><h2 id="硬件需求" tabindex="-1">硬件需求 <a class="header-anchor" href="#硬件需求" aria-label="Permalink to &quot;硬件需求&quot;">​</a></h2><h3 id="操作系统-os" tabindex="-1">操作系统 (OS) <a class="header-anchor" href="#操作系统-os" aria-label="Permalink to &quot;操作系统 (OS)&quot;">​</a></h3><ul><li>推荐使用 Linux 或*nix 操作系统（如 Ubuntu, Debian 等）。</li><li>非 Linux 操作系统通常会提供较差的 Docker 体验，并强烈不建议使用。我们对非 Linux 操作系统的安装或故障排除的支持将大幅减少。如果您仍想尝试使用非 Linux 操作系统，可以按如下设置： <ul><li>Windows: 使用 Windows 上的 Docker Desktop 或 WSL 2。</li><li>macOS: 使用 Mac 上的 Docker Desktop。</li></ul></li></ul><h4 id="增大文件句柄限制与文件描述符限制" tabindex="-1">增大文件句柄限制与文件描述符限制 <a class="header-anchor" href="#增大文件句柄限制与文件描述符限制" aria-label="Permalink to &quot;增大文件句柄限制与文件描述符限制&quot;">​</a></h4><p>为确保 AMMDS 在 Linux 系统上正常运行，您需要适当增加 inotify 和文件描述符限制。</p><h5 id="_524288-与-1048576-的区别" tabindex="-1"><code>524288</code> 与 <code>1048576</code> 的区别 <a class="header-anchor" href="#_524288-与-1048576-的区别" aria-label="Permalink to &quot;\`524288\` 与 \`1048576\` 的区别&quot;">​</a></h5><table tabindex="0"><thead><tr><th>项目</th><th><code>524288</code></th><th><code>1048576</code></th></tr></thead><tbody><tr><td>十进制含义</td><td>524,288</td><td>1,048,576</td></tr><tr><td>二进制含义</td><td>2<sup>19</sup></td><td>2<sup>20</sup></td></tr><tr><td>可监控的文件/目录数</td><td>50 万左右</td><td>100 万左右</td></tr><tr><td>占用内核内存（粗略估计）</td><td>每个 watch 占 ~200 字节（可能变）</td><td>双倍内存占用（约 200 MB）</td></tr><tr><td>适用场景</td><td>一般中型系统/项目足够</td><td>需要监控大量文件，如递归目录监听或多个实例</td></tr></tbody></table><h5 id="检查当前系统参数" tabindex="-1">检查当前系统参数 <a class="header-anchor" href="#检查当前系统参数" aria-label="Permalink to &quot;检查当前系统参数&quot;">​</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/sys/fs/inotify/max_user_instances</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/sys/fs/inotify/max_user_watches</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ulimit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span></span></code></pre></div><h5 id="增加系统参数-sysctl" tabindex="-1">增加系统参数 (sysctl) <a class="header-anchor" href="#增加系统参数-sysctl" aria-label="Permalink to &quot;增加系统参数 (sysctl)&quot;">​</a></h5><p>须在 root 用户下执行以下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 增加 inotify 实例数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fs.inotify.max_user_instances=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 增加 inotify 监听数量</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fs.inotify.max_user_watches=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">524288</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加系统最大文件句柄数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fs.file-max=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">524288</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span></span></code></pre></div><h5 id="增加文件描述符限制-ulimit" tabindex="-1">增加文件描述符限制（ulimit） <a class="header-anchor" href="#增加文件描述符限制-ulimit" aria-label="Permalink to &quot;增加文件描述符限制（ulimit）&quot;">​</a></h5><p>编辑 <code>/etc/security/limits.conf</code> 文件，添加以下内容：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> soft nofile 524288</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hard nofile 524288</span></span></code></pre></div><p>然后，重新登录终端或重启系统即可。</p><blockquote><p>请注意，增加文件描述符限制可能会影响其他正在运行的应用程序。如果您不确定如何设置，请咨询您的系统管理员或技术支持人员。</p></blockquote><h3 id="内存-ram" tabindex="-1">内存 (RAM) <a class="header-anchor" href="#内存-ram" aria-label="Permalink to &quot;内存 (RAM)&quot;">​</a></h3><ul><li>最低要求：4GB</li><li>推荐配置：6GB</li></ul><h3 id="处理器-cpu" tabindex="-1">处理器 (CPU) <a class="header-anchor" href="#处理器-cpu" aria-label="Permalink to &quot;处理器 (CPU)&quot;">​</a></h3><ul><li>最低要求：2 核</li><li>推荐配置：4 核</li></ul><h3 id="存储" tabindex="-1">存储 <a class="header-anchor" href="#存储" aria-label="Permalink to &quot;存储&quot;">​</a></h3><ul><li>推荐使用 Unix 兼容的文件系统（如 EXT4, ZFS, APFS 等），并支持用户/组所有权和权限。</li><li>刮削数据以及影视其他数据，可能会使媒体库的大小增加 10-20%。</li></ul><h2 id="软件需求" tabindex="-1">软件需求 <a class="header-anchor" href="#软件需求" aria-label="Permalink to &quot;软件需求&quot;">​</a></h2><p>AMMDS 需要带有 Docker Compose 插件的 Docker：</p><ul><li><strong>Docker Engine</strong>: 此 CLI 变体专为 Linux 服务器设计（或通过 WSL2 在 Windows 上使用）。</li><li><strong>Docker Desktop</strong>: 此 GUI 变体不推荐用于 Linux，但可用于 Windows 或 macOS。</li></ul><br><footer style="font-size:0.8em;"> 新疆萌森软件开发工作室提供技术支持 <br> 版权所有 © 2023-2025 <a href="https://beian.miit.gov.cn" rel="noreferrer" target="_blank">新ICP备2023003452号-1</a></footer>`,30)]))}const u=i(l,[["render",n]]);export{c as __pageData,u as default};
