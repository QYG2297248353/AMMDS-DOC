import{p as k,C as n,c as d,o as r,ad as o,G as e,j as i,a,w as E}from"./chunks/framework.DtW8lrcE.js";const F=JSON.parse('{"title":"Docker Compose","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/deploy/install-docker-compose.md","filePath":"guide/deploy/install-docker-compose.md","lastUpdated":1750846713000}'),c={name:"guide/deploy/install-docker-compose.md"},u=Object.assign(c,{setup(g){const l=k([{label:"é»˜è®¤ç”¨æˆ·å",value:"ammds"},{label:"é»˜è®¤å¯†ç ",value:"ammds"}]);return(y,s)=>{const p=n("a-image"),t=n("a-descriptions"),h=n("a-typography-text");return r(),d("div",null,[s[1]||(s[1]=o(`<h1 id="docker-compose" tabindex="-1">Docker Compose <a class="header-anchor" href="#docker-compose" aria-label="Permalink to &quot;Docker Compose&quot;">â€‹</a></h1><p><strong>Docker Compose</strong> æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ä¸€ä¸ª YAML æ–‡ä»¶ (<code>docker-compose.yml</code>) æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œç„¶ååªéœ€ä¸€ä¸ªå‘½ä»¤å³å¯å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚å®ƒéå¸¸é€‚åˆå¼€å‘ã€æµ‹è¯•å’Œç™»å°ç¯å¢ƒä¸­çš„å¿«é€Ÿéƒ¨ç½²å’Œç®¡ç†ã€‚</p><h2 id="åˆ›å»ºæœåŠ¡" tabindex="-1">åˆ›å»ºæœåŠ¡ <a class="header-anchor" href="#åˆ›å»ºæœåŠ¡" aria-label="Permalink to &quot;åˆ›å»ºæœåŠ¡&quot;">â€‹</a></h2><h3 id="åˆ›å»ºåº”ç”¨ç›®å½•" tabindex="-1">åˆ›å»ºåº”ç”¨ç›®å½• <a class="header-anchor" href="#åˆ›å»ºåº”ç”¨ç›®å½•" aria-label="Permalink to &quot;åˆ›å»ºåº”ç”¨ç›®å½•&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>ammds</code> çš„ç›®å½•ç”¨äºå­˜æ”¾ç›¸å…³æ–‡ä»¶ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ammds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ammds</span></span></code></pre></div><h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶" tabindex="-1">åˆ›å»ºé…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºé…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºé…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><p>åœ¨ <code>ammds</code> ç›®å½•ä¸‹åˆ›å»ºå¹¶ç¼–è¾‘ <code>docker-compose.yml</code> æ–‡ä»¶ã€‚å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ammds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">qyg2297248353/ammds:latest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä½¿ç”¨çš„é•œåƒåç§°åŠç‰ˆæœ¬æ ‡ç­¾</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AMMDS</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å®¹å™¨åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080:80&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç«¯å£æ˜ å°„ï¼šä¸»æœºç«¯å£8080æ˜ å°„åˆ°å®¹å™¨å†…çš„80ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data:/ammds/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å°†å½“å‰ç›®å½•ä¸‹çš„dataæ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„/ammds/dataè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./db:/ammds/db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å°†å½“å‰ç›®å½•ä¸‹çš„dbæ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„/ammds/dbè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./download:/ammds/download</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å°†å½“å‰ç›®å½•ä¸‹çš„downloadæ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„/ammds/downloadè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./media:/media</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å°†å½“å‰ç›®å½•ä¸‹çš„mediaæ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨å†…çš„/mediaè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è®¾ç½®å®¹å™¨å¼‚å¸¸æ—¶æ€»æ˜¯è‡ªåŠ¨é‡å¯</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=Asia/Shanghai</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è®¾ç½®æ—¶åŒºä¸ºäºšæ´²/ä¸Šæµ·</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ammds-network</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ammds-network</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è‡ªå®šä¹‰ç½‘ç»œé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä½¿ç”¨Dockeré»˜è®¤çš„bridgeç½‘ç»œé©±åŠ¨</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">æç¤º</p><p>è¯·è‡ªè¡ŒæŒ‚è½½<code>æœ¬åœ°åª’ä½“ç›®å½•</code>åˆ°å®¹å™¨ä¸­ï¼Œè¯·å‹¿ä½¿ç”¨å‰ç¼€ä¸º <code>/ammds</code> ä½œä¸ºåª’ä½“æŒ‚è½½ç›®å½•ä½¿ç”¨ã€‚é¿å…é€ æˆæ•°æ®ä¸¢å¤±ã€‚ å‡å¦‚å®¿ä¸»æœºç›®å½•ä¸ºï¼š<code>/mnt/movie</code> æ¨èæŒ‚è½½æ ¼å¼ï¼š<code>- /mnt/movie:/mnt/movie</code></p></div><details class="details custom-block"><summary>äº‘ç›˜ç”¨æˆ·é¡»çŸ¥</summary><p>å¦‚æœæ‚¨ä½¿ç”¨ CloudDrive ç­‰äº‘ç›˜æŒ‚è½½åª’ä½“ç›®å½•çš„æ–¹å¼ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ammds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">qyg2297248353/ammds:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AMMDS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080:80&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data:/ammds/data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./db:/ammds/db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./download:/ammds/download</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/media:/media:rw,rshared</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    cap_add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SYS_ADMIN</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    devices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/dev/fuse:/dev/fuse&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    security_opt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apparmor:unconfined</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ammds-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ammds-network</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span></code></pre></div><p>ç‰¹åˆ«æ³¨æ„ï¼š</p><ul><li><code>:rw,rshared</code> é™¤äº†åŸºæœ¬çš„è¯»å†™æƒé™å¤–ï¼Œ<code>rshared</code> è®©å®¹å™¨ä¹‹é—´ä¿æŒå…±äº«ä¼ æ’­ã€‚</li><li><code>SYS_ADMIN</code> å…è®¸å®¹å™¨è®¿é—®ç³»ç»Ÿèµ„æºã€‚</li><li><code>/dev/fuse:/dev/fuse</code> å…è®¸å®¹å™¨è®¿é—® FUSE è®¾å¤‡ã€‚</li><li><code>apparmor:unconfined</code> å…è®¸å®¹å™¨ä½¿ç”¨ä¸å—é™åˆ¶çš„ AppArmor é…ç½®ã€‚</li></ul><p>è¯¥éƒ¨ç½²æ–¹æ¡ˆä¸é€‚ç”¨äº <code>äº‘ç›˜æŒ‚è½½</code> + <code>ç›®å½•ç›‘æ§</code> çš„æ–¹æ¡ˆï¼Œè¯·ä½¿ç”¨ <code>å®šæ—¶æ‰«æ</code> ä»£æ›¿ <code>ç›®å½•ç›‘æ§</code>ã€‚</p></details><h2 id="å¯åŠ¨æœåŠ¡" tabindex="-1">å¯åŠ¨æœåŠ¡ <a class="header-anchor" href="#å¯åŠ¨æœåŠ¡" aria-label="Permalink to &quot;å¯åŠ¨æœåŠ¡&quot;">â€‹</a></h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨æœåŠ¡ã€‚è¿™å°†åœ¨åå°è¿è¡Œ AMMDS å®¹å™¨ï¼Œå¹¶åº”ç”¨ <code>docker-compose.yml</code> ä¸­çš„æ‰€æœ‰é…ç½®ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><h2 id="åœæ­¢æœåŠ¡" tabindex="-1">åœæ­¢æœåŠ¡ <a class="header-anchor" href="#åœæ­¢æœåŠ¡" aria-label="Permalink to &quot;åœæ­¢æœåŠ¡&quot;">â€‹</a></h2><p>å¦‚æœéœ€è¦åœæ­¢å¹¶ç§»é™¤æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span></code></pre></div><h2 id="ä½¿ç”¨å‘å¯¼" tabindex="-1">ä½¿ç”¨å‘å¯¼ <a class="header-anchor" href="#ä½¿ç”¨å‘å¯¼" aria-label="Permalink to &quot;ä½¿ç”¨å‘å¯¼&quot;">â€‹</a></h2><p>æ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨æ‰“å¼€ï¼š<a href="http://127.0.0.1:8080" target="_blank" rel="noreferrer">http://127.0.0.1:8080</a> è®¿é—®æœåŠ¡</p><p>è®¿é—®ç”±ï¼š<code>ä¸»æœºIPåœ°å€</code> + <code>æœåŠ¡ç«¯å£</code> æ„æˆ</p>`,20)),e(p,{src:"/images/system/setup-finish-001.png"}),s[2]||(s[2]=i("h3",{id:"å¼€å§‹äº«å—ğŸ¥³",tabindex:"-1"},[a("å¼€å§‹äº«å—ğŸ¥³ "),i("a",{class:"header-anchor",href:"#å¼€å§‹äº«å—ğŸ¥³","aria-label":'Permalink to "å¼€å§‹äº«å—ğŸ¥³"'},"â€‹")],-1)),e(t,{style:{"margin-top":"20px"},data:l.value,size:"medium",column:1},null,8,["data"]),e(h,{type:"secondary"},{default:E(()=>s[0]||(s[0]=[a(" å¦‚æœçœ‹ä¸æ¸…ï¼Œè¯·æ”¹ä¸ºäº®è‰²æ¨¡å¼ ")])),_:1}),s[3]||(s[3]=i("br",null,null,-1)),s[4]||(s[4]=i("br",null,null,-1)),s[5]||(s[5]=i("footer",{style:{"font-size":"0.8em"}},[a(" æ–°ç–†èŒæ£®è½¯ä»¶å¼€å‘å·¥ä½œå®¤æä¾›æŠ€æœ¯æ”¯æŒ "),i("br"),a(" ç‰ˆæƒæ‰€æœ‰ Â© 2023-2025 "),i("a",{href:"https://beian.miit.gov.cn",rel:"noreferrer",target:"_blank"},"æ–°ICPå¤‡2023003452å·-1")],-1))])}}});export{F as __pageData,u as default};
