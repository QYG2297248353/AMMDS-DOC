import{p as h,C as t,c as k,o as r,ad as o,G as e,j as i,a,w as c}from"./chunks/framework.DtW8lrcE.js";const m=JSON.parse('{"title":"Docker","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/deploy/install-docker.md","filePath":"guide/deploy/install-docker.md","lastUpdated":1749715474000}'),F={name:"guide/deploy/install-docker.md"},E=Object.assign(F,{setup(C){const d=h([{label:"默认用户名",value:"ammds"},{label:"默认密码",value:"ammds"}]);return(g,s)=>{const n=t("a-image"),l=t("a-descriptions"),p=t("a-typography-text");return r(),k("div",null,[s[1]||(s[1]=o(`<h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h1><p><strong>Docker</strong> 是一个开源的平台，用于自动化应用程序的部署、扩展和管理。它通过容器化技术让开发者可以打包应用程序及其依赖环境到一个独立的容器中，从而确保该应用在任何环境中都能一致地运行。容器是轻量级且可移植的，这使得它们非常适合微服务架构和持续集成/持续交付（CI/CD）流程。</p><h2 id="一键运行" tabindex="-1">一键运行 <a class="header-anchor" href="#一键运行" aria-label="Permalink to &quot;一键运行&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -itd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AMMDS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/data:/ammds/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/db:/ammds/db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/download:/ammds/download</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/media:/media</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  qyg2297248353/ammds:latest</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>请自行挂载媒体目录到容器中，请勿使用 <code>/ammds/data</code> 和 <code>/ammds/db</code> 作为媒体挂载目录使用。避免造成数据丢失。</p></div><details class="details custom-block"><summary>命令解释</summary><table tabindex="0"><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td><code>-itd</code> 或 <code>--interactive --tty --detach</code></td><td>组合选项：<ul><li><code>-i</code> 或 <code>--interactive</code>: 保持 STDIN 开启，即使没有附加也保持容器的标准输入打开。</li><li><code>-t</code> 或 <code>--tty</code>: 分配一个伪TTY（终端），用于模拟物理TTY，让您可以像在本地终端一样与容器交互。</li><li><code>-d</code> 或 <code>--detach</code>: 在后台运行容器，使其作为一个守护进程启动。</li></ul></td></tr><tr><td><code>--name AMMDS</code></td><td>指定容器的名称为 <code>AMMDS</code>。</td></tr><tr><td><code>-p 8080:80</code></td><td>将主机的8080端口映射到容器内的80端口，格式为 <code>-p &lt;主机端口&gt;:&lt;容器端口&gt;</code>。</td></tr><tr><td><code>-v $(pwd)/data:/ammds/data</code></td><td>将当前工作目录下的 <code>./data</code> 文件夹挂载到容器内的 <code>/ammds/data</code> 路径，实现数据持久化。</td></tr><tr><td><code>-v $(pwd)/db:/ammds/db</code></td><td>将当前工作目录下的 <code>./db</code> 文件夹挂载到容器内的 <code>/ammds/db</code> 路径，用于存储数据库文件。</td></tr><tr><td><code>-v $(pwd)/download:/ammds/download</code></td><td>将当前工作目录下的 <code>./download</code> 文件夹挂载到容器内的 <code>/ammds/download</code> 路径，用于下载内容的存储。</td></tr><tr><td><code>-v $(pwd)/media:/media</code></td><td>将当前工作目录下的 <code>./media</code> 文件夹挂载到容器内的 <code>/media</code> 路径，适，用于挂载媒体目录，用户请自行选择挂载路径。</td></tr><tr><td><code>--restart always</code></td><td>设置容器总是自动重启，确保容器在任何情况下（包括系统重启）都能自动启动。</td></tr><tr><td><code>qyg2297248353/ammds:latest</code></td><td>使用的 Docker 镜像名称及标签，指定要运行哪个镜像。</td></tr></tbody></table></details><details class="details custom-block"><summary>云盘用户须知</summary><p>如果您使用 CloudDrive 等云盘挂载媒体目录的方式，请注意以下几点：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -itd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AMMDS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/data:/ammds/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/db:/ammds/db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/download:/ammds/download</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /media:/media:rw,rshared</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --cap-add=SYS_ADMIN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/fuse</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --security-opt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apparmor:unconfined</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  qyg2297248353/ammds:latest</span></span></code></pre></div><p>特别注意：</p><ul><li><code>:rw,rshared</code> 除了基本的读写权限外，<code>rshared</code> 让容器之间保持共享传播。</li><li><code>--cap-add=SYS_ADMIN</code> 允许容器访问系统资源。</li><li><code>--device /dev/fuse</code> 允许容器访问 FUSE 设备。</li><li><code>--security-opt apparmor:unconfined</code> 允许容器使用不受限制的 AppArmor 配置。</li></ul><p>该部署方案不适用于 <code>云盘挂载</code> + <code>目录监控</code> 的方案，请使用 <code>定时扫描</code> 代替 <code>目录监控</code>。</p></details><h2 id="使用向导" tabindex="-1">使用向导 <a class="header-anchor" href="#使用向导" aria-label="Permalink to &quot;使用向导&quot;">​</a></h2><p>您可以通过浏览器打开：<a href="http://127.0.0.1:8080" target="_blank" rel="noreferrer">http://127.0.0.1:8080</a> 访问服务</p><p>访问由：<code>主机IP地址</code> + <code>服务端口</code> 构成</p>`,10)),e(n,{src:"/images/system/setup-finish-001.png"}),s[2]||(s[2]=i("h3",{id:"开始享受🥳",tabindex:"-1"},[a("开始享受🥳 "),i("a",{class:"header-anchor",href:"#开始享受🥳","aria-label":'Permalink to "开始享受🥳"'},"​")],-1)),e(l,{style:{"margin-top":"20px"},data:d.value,size:"medium",column:1},null,8,["data"]),e(p,{type:"secondary"},{default:c(()=>s[0]||(s[0]=[a(" 如果看不清，请改为亮色模式 ")])),_:1}),s[3]||(s[3]=i("br",null,null,-1)),s[4]||(s[4]=i("br",null,null,-1)),s[5]||(s[5]=i("footer",{style:{"font-size":"0.8em"}},[a(" 新疆萌森软件开发工作室提供技术支持 "),i("br"),a(" 版权所有 © 2023-2025 "),i("a",{href:"https://beian.miit.gov.cn",rel:"noreferrer",target:"_blank"},"新ICP备2023003452号-1")],-1))])}}});export{m as __pageData,E as default};
