---
sidebar_position: 2
sidebar_label: "스크레이핑 설정"
---

# 스크레이핑 설정

스크레이핑 설정은 작업 실행 전에 시스템이 네트워크에서 비디오 메타데이터를 어떻게 가져오고, 파일 디렉토리 구조를 어떻게 정리하며, 기타 스크레이핑 관련 매개변수를 설정하여 스크레이핑 프로세스가 비디오 자원을 효율적이고 정확하게获取하고 조직할 수 있도록 합니다.

<!-- truncate -->

## 스크레이핑 설정 접근

다음 경로를 통해 스크레이핑 규칙 설정 페이지에 접근할 수 있습니다:

**작업 관리 >> 스크레이핑 규칙 설정**

:::info 작업 팁
설정을 업데이트한 후 **저장** 버튼을 클릭해야 설정이 적용됩니다.
:::

## 설정 인터페이스

![스크레이핑 규칙 설정](/img/usage/module/scrape-config-01.png)

![스크레이핑 규칙 설정](/img/usage/module/scrape-config-02.png)

![스크레이핑 규칙 설정](/img/usage/module/scrape-config-03.png)

## 기본 설정

### 문자 필터링

**기능 설명**：스크레이핑 시 파일 이름을 필터링하여 불필요한 문자를 미리 제거하여 번호 식별률을 향상시킵니다.

**역할**：파일 이름에서 방해 문자를 제거함으로써 시스템이 비디오 번호를 더 정확하게 식별하여 더 정확한 메타데이터를获取할 수 있도록 합니다.

### 이미지 다운로드 실패 허용

**기능 설명**：이미지 다운로드가 실패할 때 스크레이핑 작업을 계속 실행할지 설정합니다.

**역할**：이 옵션을 활성화하면 이미지 다운로드가 실패해도 스크레이핑 결과 획득에 영향을 미치지 않아 스크레이핑 성공률이 향상됩니다.

### 디렉토리 형식 정리

**기능 설명**：스크레이핑 완료 후 디렉토리의 조직 구조를 설정합니다.

**구성 방법**：시스템에서 제공하는 변수를 결합하여 디렉토리 형식을 사용자 정의할 수 있습니다.

**예시**：`${actor}/${number}`는 배우 이름을 첫 번째 디렉토리로, 영화 번호를 두 번째 디렉토리로 하는 구조를 생성합니다.

### 파일 이름 형식 정리

**기능 설명**：스크레이핑 완료 후 비디오 파일의命名 형식을 설정합니다.

**구성 방법**：시스템에서 제공하는 변수를 결합하여 파일 이름 형식을 사용자 정의할 수 있습니다.

**예시**：`${title_safe}.${ext}`는 안전한 영화 제목을 파일 이름으로 사용하고 원본 파일 확장자를 유지합니다.

### 자동 스크레이핑

**기능 설명**：스캔 작업 완료 후 자동으로 스크레이핑 작업을 트리거할지 설정합니다.

**기본 동작**：기본적으로 스캔된 파일을 수동으로 선택하여 스크레이핑 작업을 실행해야 합니다.

**활성화 효과**：활성화하면 시스템이 구성된 규칙에 따라 스크레이핑할 수 있는 비디오 파일을 자동으로 발견하고 스크레이핑을 실행합니다.

### 자동 스크레이핑 간격

**기능 설명**：자동 스크레이핑 작업의 실행 간격을 설정합니다.

**단위**：분

**기본값**：3분（자동 스크레이핑이 활성화된 경우）

### HD 커버 다운로드

**기능 설명**：비디오의 HD 커버를 다운로드할지 설정합니다.

**다운로드 원본**：활성화하면 시스템이 Fanza DMM에서 HD 커버를 가져오려고 시도하고，없는 경우 다른 원본에서 가져오려고 시도합니다.

### 외부 자막 검색

**기능 설명**：비디오의 외부 자막（소프트 자막）을 검색하고 다운로드할지 설정합니다.

**저장 위치**：다운로드된 자막 파일은 최종 스크레이핑 디렉토리에保存됩니다.

### 번호 혼합

**기능 설명**：스크레이핑 후 생성된 nfo 파일에서 제목 등의 필드에 번호 접두사를 추가할지 설정합니다.

### 자동 태그

**기능 설명**：스크레이핑 후 생성된 nfo 파일의 tag 태그에 추가 정보를 추가할지 설정합니다.

**예시**：해상도、번호、중국어 자막、크랙 등의 태그를 추가합니다.

### 자동 분류 태그

**기능 설명**：스크레이핑 후 생성된 nfo 파일의 genre 태그에 추가 정보를 추가할지 설정합니다.

**예시**：해상도、번호、중국어 자막、크랙 등의 태그를 추가합니다.

### 로컬 데이터 우선

**기능 설명**：스크레이핑 시 로컬에 기존의 데이터를 우선 사용할지 설정합니다.

**역할**：로컬에 기존의 데이터가 스크레이핑 규칙을 충족하면 네트워크에서 데이터를 다운로드하거나 업데이트하지 않고 직접 로컬 데이터를 사용하여 스크레이핑 효율을 향상시킵니다.

### 스크레이퍼

**기능 설명**：시스템에서 사용하는 스크레이퍼를 선택합니다.

**사용 가능한 스크레이퍼**：
- **로컬**：사용자가 수동으로 생성한 비디오 정보를 사용
- **Metatube** (플러그인)
- **ThePornDB** (플러그인)
- **Stash** (플러그인)
- **Fanza DMM** (플러그인)

### 스크레이핑 스틸컷

**기능 설명**：비디오의 스틸컷을 다운로드할지 설정합니다.

**저장 위치**：다운로드된 스틸컷 파일은 지정된 디렉토리에 저장됩니다.

### 스틸컷 디렉토리

**기능 설명**：스틸컷 파일의 저장 디렉토리를 설정합니다.

**기본값**：비디오 파일과 동일한 디렉토리의 `extrafanart` 디렉토리에 저장됩니다.

### 멀티스레드 실행

**기능 설명**：스크레이핑 작업을 멀티스레드로 실행할지 설정합니다.

**장단점**：
- **장점**：활성화하면 스크레이핑 효율이 향상됩니다.
- **단점**：시스템 리소스 소비가 증가됩니다.

**권장**：시스템 리소스 상황에 따라 멀티스레드 실행을 적절히 구성하세요. 예를 들어 시스템에 4개의 CPU 코어가 있는 경우 4개의 스레드로 설정하는 것이 좋습니다.

### 최대 스레드 수

**기능 설명**：스크레이핑 시의 최대 스레드 수를 설정합니다.

**기본값**：5개의 스레드

**권장**：시스템 리소스 상황에 따라 최대 스레드 수를 적절히 구성하세요.

## 디렉토리와 파일 이름 정리

구성 항목에는 **디렉토리 형식 정리**와 **파일 이름 형식 정리** 두 가지 옵션이 있습니다. 시스템에서 제공하는 변수를组合하여 디렉토리와 파일 이름의 형식을自定义할 수 있습니다.

### 안전한 변수

**역할**：변수名 뒤에 `_safe` 접미사를添加하여 파일 이름에特殊 문자가 포함되어导致的问题을避免합니다.

**예시**：`${actor_safe}` 배우 이름에特殊 문자가出现하면安全한 문자로替换됩니다.

**역할**：비디오 제목中的特殊 문자导致 디렉토리 계층이中断되는 것을避免하여 디렉토리 구조의完整性을确保합니다.

### 정리 예시

완전한 비디오 파일은 다음과 같이 정리됩니다：`${actor}/${number}/${title_safe}.${ext}`

**예시**：
- 배우 이름："John Doe"
- 영화 번호："ABC-123"
- 영화 제목："Sample Title"
- 파일 확장자："mkv"

**최종 정리된 경로**：`John Doe/ABC-123/Sample Title.mkv`

### 디렉토리 변수 정리

**기본 구성**：`${actor}/${number}`

**주의**：`/`는 디렉토리 구분符로识别되어不同的 디렉토리 계층을创建할 수 있습니다.

| 변수名 | 안전한 변수名 | 설명 | 예시 |
|--------|------------|------|------|
| `${actor}` | `${actor_safe}` | 배우 이름 | "John Smith" |
| `${number}` | `${number_safe}` | 영화 번호 | "ABC-123" |
| `${title}` | `${title_safe}` | 영화 제목 | "Sample Title" |
| `${date}` | `${date_safe}` | 발매 날짜 | "2024/01/01" |
| `${year}` | `${year_safe}` | 발매 연도 | "2024" |
| `${month}` | `${month_safe}` | 발매 월 | "01" |
| `${day}` | `${day_safe}` | 발매 날짜 | "01" |
| `${mosaic}` | `${mosaic_safe}` | 모자이크 유형 | "无码/有码" |
| `${resolution}` | `${resolution_safe}` | 비디오 해상도 | "1080p" |
| `${director}` | `${director_safe}` | 감독 이름 | "Director Name" |
| `${studio}` | `${studio_safe}` | 제작사 이름 | "Studio Name" |

**기본값**：모든 변수에는 기본값이 있으며 지정되지 않은 경우 기본값을使用합니다.

### 파일 이름 변수 정리

**기본 구성**：`${number}`

| 변수名 | 안전한 변수名 | 설명 | 예시 |
|--------|------------|------|------|
| `${actor}` | `${actor_safe}` | 배우 이름 | "John Smith" |
| `${number}` | `${number_safe}` | 영화 번호 | "ABC-123" |
| `${title}` | `${title_safe}` | 영화 제목 | "Sample Title" |
| `${date}` | `${date_safe}` | 발매 날짜 | "2024/01/01" |
| `${year}` | `${year_safe}` | 발매 연도 | "2024" |
| `${month}` | `${month_safe}` | 발매 월 | "01" |
| `${day}` | `${day_safe}` | 발매 날짜 | "01" |
| `${mosaic}` | `${mosaic_safe}` | 모자이크 유형 | "无码/有码" |
| `${resolution}` | `${resolution_safe}` | 비디오 해상도 | "1080p" |
| `${director}` | `${director_safe}` | 감독 이름 | "Director Name" |
| `${studio}` | `${studio_safe}` | 제작사 이름 | "Studio Name" |

## 설정 예시

다음은 일반적인 스크레이핑 설정 예시입니다：

| 설정 항목 | 설정 값 |
|--------|--------|
| 문자 필터링 | 활성화 |
| 이미지 다운로드 실패 허용 | 활성화 |
| 디렉토리 형식 정리 | `${actor}/${number}` |
| 파일 이름 형식 정리 | `${title_safe}.${ext}` |
| 자동 스크레이핑 | 활성화 |
| 자동 스크레이핑 간격 | 5분 |
| HD 커버 다운로드 | 활성화 |
| 외부 자막 검색 | 활성화 |
| 번호 혼합 | 활성화 |
| 자동 태그 | 활성화 |
| 자동 분류 태그 | 활성화 |
| 로컬 데이터 우선 | 활성화 |
| 스크레이퍼 | Metatube, Fanza DMM |
| 스크레이핑 스틸컷 | 활성화 |
| 스틸컷 디렉토리 | extrafanart |
| 멀티스레드执行 | 활성화 |
| 최대 스레드 수 | 4 |

## 자주 묻는 질문

### Q: 왜 스크레이핑이 실패합니까?

**A**：가능한 원인은 다음과 같습니다：
- 번호 식별 오류
- 네트워크 연결 문제
- 스크레이퍼가 일치하는 메타데이터를 찾을 수 없음
- 구성 오류

### Q: 스크레이핑 성공률을提高하려면 어떻게 해야 합니까?

**A**：다음 방법을 시도할 수 있습니다：
- 파일 이름中的 번호가清晰하게 식별 가능하도록确保하세요
- 문자 필터링 기능을 활성화하세요
- 여러 개의 스크레이퍼를 구성하세요
- 네트워크 연결이正常한지确保하세요

### Q: 자동 스크레이핑과 수동 스크레이핑의 차이점은 무엇입니까?

**A**：
- **자동 스크레이핑**：스캔 완료后 자동执行，수동干预이 필요 없으며 대량 처리에适合합니다.
- **수동 스크레이핑**：파일을 수동으로选择하여 스크레이핑을执行해야 하며 스크레이핑结果要求가 높은场景에适合합니다.

### Q: 왜 다운로드된 자막 파일이 비디오 파일과 일치하지 않습니까?

**A**：가능한 원인은 다음과 같습니다：
- 자막 검색时 번호 식별이准确하지 않음
- 네트워크 연결 문제导致 자막 다운로드 실패
- 자막 파일命名이 비디오 파일과 일치하지 않음

### Q: 디렉토리 구조를自定义하려면 어떻게 해야 합니까?

**A**：시스템에서 제공하는 변수를组合하여 예를 들어：
- `${studio}/${actor}/${number}`：제작사 → 배우 → 번호의 계층으로组织
- `${year}/${month}/${title_safe}`：연도 → 월 → 제목의 계층으로组织

