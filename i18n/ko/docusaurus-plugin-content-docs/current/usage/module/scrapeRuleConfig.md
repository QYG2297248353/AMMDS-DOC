---
sidebar_position: 2
sidebar_label: "스크래핑 구성"
---

# 스크래핑 구성

스크래핑 구성은 작업 실행 전 시스템이 네트워크에서 영상 메타데이터를 어떻게获取할지、파일 디렉토리 구조를 어떻게 정리할지、그리고 기타 스크래핑 관련 매개변수를 설정하여 스크래핑 과정이 영상 자원을 효율적이고 정확하게获取하고 조직할 수 있도록 합니다.

<!-- truncate -->

## 스크래핑 구성에 액세스

다음 경로를 통해 스크래핑 규칙 구성 페이지에 액세스할 수 있습니다:

**작업 관리 >> 스크래핑 규칙 구성**

:::info 작업提示
구성을 업데이트한 후 **저장** 버튼을 클릭해야 합니다. 그렇지 않으면 구성이 적용되지 않습니다.
:::

## 구성 인터페이스

![스크래핑 규칙 구성](/img/usage/module/scrape-config-01.png)

![스크래핑 규칙 구성](/img/usage/module/scrape-config-02.png)

![스크래핑 규칙 구성](/img/usage/module/scrape-config-03.png)

## 기본 구성

### 문자 필터링

**기능 설명**: 스크래핑时 파일 이름을 필터링하여 불필요한 문자를 미리 필터링하여 번호 인식률을提高합니다.

**작용**: 파일 이름에서 방해 문자를 제거하여 시스템이 영상 번호를 더准确하게 인식하도록 하여 더准确한 메타데이터를获取합니다.

### 이미지 다운로드 실패 허용

**기능 설명**: 이미지 다운로드가 실패할 때 스크래핑 작업을 계속执行할지 설정합니다.

**작용**: 이 옵션을 활성화하면 이미지 다운로드가 실패하더라도 스크래핑 결과获取에 영향을 주지 않아 스크래핑 성공률을提高합니다.

### 디렉토리 형식 정리

**기능 설명**: 스크래핑 완료后 디렉토리의 조직 구조를 설정합니다.

**구성 방법**: 시스템이提供하는 변수를 조합하여 디렉토리 형식을自定义합니다.

**예시**: `${actor}/${number}` 는 배우 이름을一级 디렉토리로、영화 번호를二级 디렉토리로创建하는 구조입니다.

### 파일 이름 형식 정리

**기능 설명**: 스크래핑 완료后视频文件的命名格式을 설정합니다.

**구성 방법**: 시스템이提供하는 변수를 조합하여文件 이름格式을自定义합니다.

**예시**: `${title_safe}.${ext}` 는安全한 영화 제목을文件 이름으로使用하고 원본文件 확장자를保留합니다.

### 자동 스크래핑

**기능 설명**: 스캔 작업 완료后 자동으로 스크래핑 작업을触发할지 설정합니다.

**기본行为**: 기본情况下 스캔된文件을手动选择하여 스크래핑 작업을执行해야 합니다.

**활성화效果**: 활성화后 시스템은 구성된 규칙에 따라 스크래핑할 수 있는 영상文件을 자동으로发现하여 스크래핑을执行합니다.

### 자동 스크래핑 간격

**기능 설명**: 자동 스크래핑 작업의执行间隔을 설정합니다.

**단위**: 분

**기본值**: 3분 (자동 스크래핑을 활성화한 경우)

### 고화질 커버 다운로드

**기능 설명**: 영상의 고화질 커버를 다운로드할지 설정합니다.

**다운로드 출처**: 활성화后 시스템은 Fanza DMM에서 고화질 커버를 가져오려고 시도합니다. 없으면 다른 출처에서 가져오려고 시도합니다.

### 외부 자막 검색

**기능 설명**: 영상의 외부 자막(소프트 자막)을 검색하여 다운로드할지 설정합니다.

**저장 위치**: 다운로드된 자막文件은 최종 스크래핑 디렉토리에保存됩니다.

### 번호 혼합

**기능 설명**: 스크래핑后生成된 nfo 文件中 제목等字段에 번호 접두사를添加할지 설정합니다.

### 자동 태그

**기능 설명**: 스크래핑后生成된 nfo 文件의 tag 태그에额外信息를添加할지 설정합니다.

**예시**: 해상도、번호、중국어 자막、모자이크 해제等 태그를添加합니다.

### 자동 분류 태그

**기능 설명**: 스크래핑后生成된 nfo 文件의 genre 태그에额外信息를添加할지 설정합니다.

**예시**: 해상도、번호、중국어 자막、모자이크 해제等 태그를添加합니다.

### 로컬 데이터 우선

**기능 설명**: 스크래핑时 로컬에已有的数据를 우선使用할지 설정합니다.

**작용**: 로컬에已有的数据가 스크래핑 규칙을满足하면 네트워크에서 데이터를 다운로드하거나更新하지 않고直接 로컬数据를使用하여 스크래핑效率를提高합니다.

### 스크래퍼

**기능 설명**: 시스템이使用하는 스크래퍼를选择합니다.

**사용 가능한 스크래퍼**:
- **로컬**: 사용자가手动创建한 영상信息를使用
- **Metatube** (플러그인)
- **ThePornDB** (플러그인)
- **Stash** (플러그인)
- **Fanza DMM** (플러그인)

### 스크래핑 스틸컷

**기능 설명**: 영상의 스틸컷을 다운로드할지 설정합니다.

**저장 위치**: 다운로드된 스틸컷文件은指定된 디렉토리에保存됩니다.

### 스틸컷 디렉토리

**기능 설명**: 스틸컷文件的保存目录를 설정합니다.

**기본值**: 비디오文件과 같은目录的 `extrafanart` 目录에保存됩니다.

### 다중 스레드执行

**기능 설명**: 다중 스레드로 스크래핑 작업을执行할지 설정합니다.

**장단점**:
- **장점**: 활성화后 스크래핑效率를提高합니다
- **단점**: 시스템资源 소비가增加됩니다

**권장**: 시스템资源情况에 따라 다중 스레드执行을合理配置합니다. 예를 들어 시스템에 4개의 CPU 코어가 있는 경우 4개의 스레드로 설정하는 것이 좋습니다.

### 최대 스레드 수

**기능 설명**: 스크래핑时的 최대 스레드 수를 설정합니다.

**기본值**: 5개의 스레드

**권장**: 시스템资源情况에 따라 최대 스레드 수를合理配置합니다.

## 디렉토리与文件 이름 정리

구성项中 **디렉토리 형식 정리** 和 **文件 이름 형식 정리** 두个选项이 있습니다. 시스템이提供하는 변수를 조합하여 디렉토리和文件 이름格式을自定义할 수 있습니다.

### 안전 변수

**작용**: 변수名后에 `_safe` 접미사를添加하여文件 이름에特殊字符가 포함되어导致的问题을避免합니다.

**예시**: `${actor_safe}` 배우 이름에特殊字符가出现하면安全한字符로替换됩니다.

**작용**: 영상 제목中的特殊字符导致 디렉토리层级被中断하는 것을避免하여 디렉토리结构的完整性를确保합니다.

### 정리 예시

一个完整的视频文件은 `${actor}/${number}/${title_safe}.${ext}` 로 정리됩니다.

**예시**:
- 배우 이름: "John Doe"
- 영화 번호: "ABC-123"
- 영화 제목: "Sample Title"
- 文件 확장자: "mkv"

**최终 정리后的路径**: `John Doe/ABC-123/Sample Title.mkv`

### 디렉토리 변수 정리

**기본 구성**: `${actor}/${number}`

**注意**: `/` 는 디렉토리 구분符로识别되어不同的 디렉토리层级를创建할 수 있습니다.

| 变量名 | 안전变量名 | 描述 | 示例 |
|--------|------------|------|------|
| `${actor}` | `${actor_safe}` | 배우 이름 | "John Smith" |
| `${number}` | `${number_safe}` | 영화 번호 | "ABC-123" |
| `${title}` | `${title_safe}` | 영화 제목 | "Sample Title" |
| `${date}` | `${date_safe}` | 출시日期 | "2024/01/01" |
| `${year}` | `${year_safe}` | 출시年份 | "2024" |
| `${month}` | `${month_safe}` | 출시月份 | "01" |
| `${day}` | `${day_safe}` | 출시日期 | "01" |
| `${mosaic}` | `${mosaic_safe}` | 모자이크类型 | "무모자이크/유모자이크" |
| `${resolution}` | `${resolution_safe}` | 비디오 해상도 | "1080p" |
| `${director}` | `${director_safe}` | 감독 이름 | "Director Name" |
| `${studio}` | `${studio_safe}` | 제작사 이름 | "Studio Name" |

**기본值**: 모든变量均有默认值，未指定时默认值를使用합니다.

### 文件 이름变量 정리

**기본 구성**: `${number}`

| 变量名 | 안전变量名 | 描述 | 示例 |
|--------|------------|------|------|
| `${actor}` | `${actor_safe}` | 배우 이름 | "John Smith" |
| `${number}` | `${number_safe}` | 영화 번호 | "ABC-123" |
| `${title}` | `${title_safe}` | 영화 제목 | "Sample Title" |
| `${date}` | `${date_safe}` | 출시日期 | "2024/01/01" |
| `${year}` | `${year_safe}` | 출시年份 | "2024" |
| `${month}` | `${month_safe}` | 출시月份 | "01" |
| `${day}` | `${day_safe}` | 출시日期 | "01" |
| `${mosaic}` | `${mosaic_safe}` | 모자이크类型 | "무모자이크/유모자이크" |
| `${resolution}` | `${resolution_safe}` | 비디오 해상도 | "1080p" |
| `${director}` | `${director_safe}` | 감독 이름 | "Director Name" |
| `${studio}` | `${studio_safe}` | 제작사 이름 | "Studio Name" |

## 구성 예제

以下是一个典型的 스크래핑 구성 예제:

| 配置项 | 设置值 |
|--------|--------|
| 문자 필터링 | 활성화 |
| 이미지 다운로드 실패 허용 | 활성화 |
| 디렉토리 형식 정리 | `${actor}/${number}` |
| 文件 이름 형식 정리 | `${title_safe}.${ext}` |
| 자동 스크래핑 | 활성화 |
| 자동 스크래핑 간격 | 5분 |
| 고화질 커버 다운로드 | 활성화 |
| 외부 자막 검색 | 활성화 |
| 번호 혼합 | 활성화 |
| 자동 태그 | 활성화 |
| 자동 분류 태그 | 활성화 |
| 로컬 데이터 우선 | 활성화 |
| 스크래퍼 | Metatube, Fanza DMM |
| 스크래핑 스틸컷 | 활성화 |
| 스틸컷 디렉토리 | extrafanart |
| 다중 스레드执行 | 활성화 |
| 최대 스레드 수 | 4 |

## 자주 묻는 질문

### Q: 왜 스크래핑이 실패하나요?

**A**: 다음과 같은原因이 있을 수 있습니다:
- 번호 인식错误
- 네트워크 연결问题
- 스크래퍼가匹配하는 메타데이터를找到할 수 없음
- 구성错误

### Q: 스크래핑 성공률을如何提高하나요?

**A**: 다음方法를尝试할 수 있습니다:
- 파일 이름中的 번호가清晰하게 식별 가능한지确保하세요
- 문자 필터링 기능을 활성화하세요
-多个 스크래퍼를 구성하세요
- 네트워크 연결이正常한지确保하세요

### Q: 자동 스크래핑과手动 스크래핑의区别是什么?

**A**:
- **자동 스크래핑**: 스캔完成后 자동执行，手动干预이 필요하지 않아批量处理에适合
- **手动 스크래핑**:文件을手动选择하여 스크래핑을执行해야 하며 스크래핑 결과要求가较高的场景에适合

### Q: 왜 다운로드된 자막文件이视频文件과匹配되지 않나요?

**A**: 다음과 같은原因이 있을 수 있습니다:
- 자막 검색时 번호 인식이准确하지 않음
- 네트워크 연결问题导致 자막 다운로드 실패
- 자막文件命名与视频文件不一致

### Q:如何自定义目录结构?

**A**: 시스템이提供하는 변수를 조합하여 예를 들어:
- `${studio}/${actor}/${number}`: 제작사 → 배우 → 번호的层级로组织
- `${year}/${month}/${title_safe}`:年份 → 月份 → 제목的层级로组织

