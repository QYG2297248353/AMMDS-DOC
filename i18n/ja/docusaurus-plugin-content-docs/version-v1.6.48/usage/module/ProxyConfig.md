---
sidebar_position: 5
sidebar_label: "ネットワークプロキシ設定"
---

# ネットワークプロキシ設定

ネットワークプロキシ設定は、プログラムがネットワークリソースにアクセスする際に使用するプロキシサーバーを設定するためのもので、プロキシを介してのみアクセス可能なリソースに正常にアクセスできるようにします。

<!-- truncate -->

## ネットワークプロキシ設定へのアクセス

ネットワークプロキシ設定ページには、次の2つのパスからアクセスできます：

1. **タスク管理 >> ネットワークプロキシ**
2. **システム管理 >> システム設定 >> ネットワーク設定**

## 設定インターフェース

![ネットワークプロキシ設定](/img/usage/module/proxy-config-01.png)

![ネットワークプロキシ設定](/img/usage/module/proxy-config-02.png)

## 設定項目の説明

### プロキシを有効にする

**機能説明**：ネットワークプロキシ機能を有効にするかどうかを設定します。

**効果**：有効にすると、プログラムは設定されたプロキシサーバーを介してネットワークリソースにアクセスします。

### プロキシプロトコル

**機能説明**：ネットワークプロキシのプロトコルタイプを選択します。

**利用可能なプロトコル**：
- HTTP
- SOCKS4
- SOCKS5

**推奨**：お使いのプロキシサーバーのタイプに合わせて適切なプロトコルを選択してください。

### プロキシホスト

**機能説明**：ネットワークプロキシサーバーのホストアドレスを入力します。

**形式**：IPアドレス（例：`192.168.1.1`）またはドメイン名（例：`proxy.example.com`）のいずれかです。

### プロキシポート

**機能説明**：ネットワークプロキシサーバーのポート番号を入力します。

**一般的なポート**：
- HTTPプロキシ：8080、3128
- SOCKSプロキシ：1080

### ユーザー名

**機能説明**：ネットワークプロキシサーバーが認証を必要とする場合、認証ユーザー名を入力します。

### パスワード

**機能説明**：ネットワークプロキシサーバーが認証を必要とする場合、認証パスワードを入力します。

### プロキシ除外ホスト

**機能説明**：プロキシを介さずにアクセスするホストアドレスを設定します。

**追加方法**：ホストアドレスを入力した後、**Enterキー**を押して追加を確認します。

**適用シナリオ**：
- ローカルネットワークリソース
- プロキシを介さずにアクセスする必要があるパブリックリソース

![ネットワークプロキシ設定](/img/usage/module/proxy-config-03.png)

![ネットワークプロキシ設定](/img/usage/module/proxy-config-04.png)

## 設定例

以下は、一般的なネットワークプロキシ設定の例です：

### 例1：HTTPプロキシ

| 設定項目 | 設定値 |
|--------|--------|
| プロキシを有効にする | 有効 |
| プロキシプロトコル | HTTP |
| プロキシホスト | 192.168.1.100 |
| プロキシポート | 8080 |
| ユーザー名 | user |
| パスワード | password |
| プロキシ除外ホスト | localhost, 127.0.0.1 |

### 例2：SOCKS5プロキシ

| 設定項目 | 設定値 |
|--------|--------|
| プロキシを有効にする | 有効 |
| プロキシプロトコル | SOCKS5 |
| プロキシホスト | proxy.example.com |
| プロキシポート | 1080 |
| ユーザー名 | - |
| パスワード | - |
| プロキシ除外ホスト | localhost, 192.168.1.* |

## 注意事項

:::warning 重要な注意事項
- **設定完了後、プログラムを再起動する必要があります**
- **設定エラーによりプログラムが正常に動作しない可能性があります**
- **プロキシサーバーのアドレスとポートが正しいことを確認してください**
- **プロキシサーバーに正常にアクセスできることを確認してください**
- **認証が必要なプロキシの場合、ユーザー名とパスワードが正しいことを確認してください**
:::

## よくある質問

### Q: なぜネットワークプロキシを設定する必要があるのですか？

**A**：一部のネットワークリソースは特定のネットワーク環境を介してのみアクセス可能な場合があり、ネットワークプロキシを設定することで、プログラムがこれらのリソースに正常にアクセスできるようになります。例えば：
- 特定の地域のネットワークリソースにアクセスする必要がある一部のスクレイパー
- 外部APIにアクセスする必要がある一部のプラグイン

### Q: プロキシ設定が正しいかどうかをテストするにはどうすればよいですか？

**A**：以下の方法でテストできます：
1. プロキシ設定を構成する
2. プログラムを再起動する
3. ネットワークアクセスを必要とする操作（スクレイピングなど）を実行してみる
4. 操作が正常に完了するかどうかを確認する

### Q: プロキシ設定が有効になると、すべてのネットワークリクエストがプロキシを介して行われますか？

**A**：いいえ、ネットワークアクセスを必要とする特定の操作のみがプロキシを介して行われ、プロキシ除外ホストを設定することで、プロキシを介さずにアクセスする必要のあるリソースを指定することもできます。

### Q: プロキシ除外ホストを設定したのに、まだプロキシを介してアクセスされるのはなぜですか？

**A**：考えられる理由は以下の通りです：
- プロキシ除外ホストの形式が正しくない
- 設定が有効になっていない（プログラムの再起動が必要）
- プログラムの内部ロジックでプロキシが優先的に使用されている

### Q: プロキシサーバーへの接続に失敗した場合、どのような影響がありますか？

**A**：プロキシサーバーへの接続に失敗した場合、以下の問題が発生する可能性があります：
- スクレイピングの失敗
- プラグインが正常に動作しない
- オンラインリソースを取得できない

## ベストプラクティス

- **安定したプロキシサーバーを使用する**：プロキシサーバーが安定して信頼性があることを確認し、頻繁な接続切断を避けます
- **プロキシ除外ホストを適切に設定する**：ローカルリソースやプロキシを必要としないパブリックリソースを除外リストに追加し、アクセス速度を向上させます
- **定期的にプロキシ設定を確認する**：ネットワーク環境に変更があった場合は、プロキシ設定を及时に更新します
- **プロキシ設定のバックアップを取る**：設定を変更する前に、現在の設定を記録しておき、問題が発生した場合に復元できるようにします