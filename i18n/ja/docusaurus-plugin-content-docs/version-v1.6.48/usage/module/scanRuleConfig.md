---
sidebar_position: 1
sidebar_label: "スキャン設定"
---

# スキャン設定

スキャン設定は、タスク実行前にシステムがメディアファイルをどのように識別して処理するかを設定するためのもので、スキャンプロセスが正確かつ効率的に動画リソースを識別できるようにします。

<!-- truncate -->

## スキャン設定へのアクセス

スキャン規則設定ページには、以下のパスからアクセスできます：

**タスク管理 >> スキャン規則設定**

:::info 操作のヒント
設定を更新した後、必ず **保存** ボタンをクリックしてください。そうしないと設定は反映されません。
:::

## 設定インターフェース

![スキャン規則設定](/img/usage/module/scan-config-01.png)

![スキャン規則設定](/img/usage/module/scan-config-02.png)

## 設定項目の説明

### 形式制限

**機能説明**：システムが識別可能なメディアファイルのタイプを設定します。

**デフォルトサポート**：システムには、`.mp4`, `.mkv`, `.avi`, `.mov` などの一般的なメディアファイルタイプが組み込まれています。

**カスタム追加**：必要に応じて、他のファイルタイプを追加することができます。追加する場合は、ファイルタイプの拡張子（例：`.strm`）を入力した後、**Enterキー**を押して入力を確認します。

### ディレクトリの無視

**機能説明**：スキャン時に無視する必要のあるディレクトリを設定します。これらのディレクトリとそのサブディレクトリ内のファイルはスキャンされません。

**設定方法**：ディレクトリの相対パス（例：`sample`, `tmp`）を入力します。ディレクトリ名は大文字小文字を区別しません。

**適用シナリオ**：サンプル、一時ファイル、その他の非動画リソースを含むディレクトリを無視するために使用できます。

### ファイルの無視

**機能説明**：スキャン時に無視する必要のあるファイルを設定します。指定された文字列が含まれるファイルはスキャンされません。

**設定方法**：ファイル名に含まれる文字列（例：`sample`, `hh800.com@`）を入力します。文字列は大文字小文字を区別しません。

**適用シナリオ**：サンプルファイル、特定のマークが付いたファイル、その他の処理不要なファイルを無視するために使用できます。

### 分割マーク

**機能説明**：分割された動画ファイルのマーク文字列の設定で、システムが分割動画を識別し、個別のファイルとして処理するのを防ぐのを助けます。

**設定方法**：分割マークの文字列（例：`part`, `cd`）を入力します。文字列は大文字小文字を区別しません。

**適用シナリオ**：複数の部分に分割された動画ファイルの処理に適しています。システムがこれらが同じ動画リソースに属していることを正しく識別できるようにします。

### 字幕形式

**機能説明**：システムが識別可能な字幕ファイル形式を設定し、システムが正しく字幕タグを追加するのを助けます。

**設定方法**：字幕ファイルの拡張子（例：`.srt`, `.ass`, `.idx`）を入力した後、**Enterキー**を押して入力を確認します。


### 最小動画サイズ

**機能説明**：動画ファイルの最小サイズのしきい値を設定します。スキャン時にこのサイズ未満の動画ファイルは無視されます。

**単位**：MB

**デフォルト値**：100MB

**特殊な場合**：`.strm` などのファイルタイプの動画を使用する場合は、最小動画サイズを **0MB** に設定することを推奨します。そうしないと、これらのファイルが正常にスキャンされない可能性があります。

### 中国語字幕の識別

**機能説明**：中国語字幕の識別キーワードを設定します。動画ファイル名にこれらのキーワードが含まれている場合、システムは自動的に中国語字幕タグを追加します。

**例**：`-C`, `.chs` など。キーワードは大文字小文字を区別しません。

### モザイク解除の識別

**機能説明**：モザイク解除の識別キーワードを設定します。動画ファイル名にこれらのキーワードが含まれている場合、システムは自動的にモザイク解除タグを追加します。

**例**：`-u`, `.uc` など。キーワードは大文字小文字を区別しません。

### ローカル nfo の読み取り

**機能説明**：有効にすると、システムは動画ファイルと同じディレクトリにある同名の `.nfo` ファイルを自動的に読み取り、その情報を解析します。

**効果**：解析された情報は自動的にメディアメタデータとして作成され、データベースに保存されるため、メタデータの手動編集の手間が軽減されます。

## 設定例

以下は、典型的なスキャン設定の例です：

| 設定項目 | 設定値 |
|--------|--------|
| 形式制限 | `.mp4`, `.mkv`, `.avi`, `.mov`, `.strm` |
| ディレクトリの無視 | `sample`, `tmp`, `Extras` |
| ファイルの無視 | `sample`, `trailer`, `preview` |
| 分割マーク | `part`, `cd`, `disc` |
| 字幕形式 | `.srt`, `.ass`, `.idx`, `.sub` |
| 最小動画サイズ | 100MB |
| 中国語字幕の識別 | `-C`, `.chs`, `.zh` |
| モザイク解除の識別 | `-u`, `.uc`, `uncensored` |
| ローカル nfo の読み取り | 有効 |

## よくある質問

### Q: なぜ一部の動画ファイルがスキャンされないのですか？

**A**：考えられる理由は以下の通りです：
- ファイル形式が形式制限リストにない
- ファイルが存在するディレクトリが無視ディレクトリに追加されている
- ファイル名に無視される文字列が含まれている
- ファイルサイズが設定された最小動画サイズのしきい値より小さい

### Q: カスタムファイル形式を正しく追加するにはどうすればよいですか？

**A**：カスタムファイル形式を追加する際には、以下の点に注意してください：
- ファイル拡張子のピリオドを含める必要があります（例：`.strm` ではなく `strm`）
- 各ファイル形式は個別に追加する必要があり、追加後にエンターキーを押して確認します
- 追加するファイル形式がシステムで処理可能なタイプであることを確認します

### Q: 分割マークの役割は何ですか？

**A**：分割マークは、同じ動画リソースに属する複数の分割ファイルをシステムが識別するのを助け、それらが複数の独立したファイルとしてではなく、一個の全体として正しく処理されるようにします。


