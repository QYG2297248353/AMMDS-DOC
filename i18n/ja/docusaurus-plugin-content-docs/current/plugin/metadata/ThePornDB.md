---
sidebar_position: 2
sidebar_label: "ThePornDB"
---

# ThePornDB

ThePornDB はプロの成人動画メタデータ管理ツールで、主に動画ファイルの名前変更に使用されます。Plex、Jellyfin などのメディアサーバープラグインや Stash スクリプトがユーザーの手動操作なしに自動的にメタデータを照合できるようにします。このツールはサーバーモードとコマンドラインモードで実行することができ、メディアライブラリ管理に効率的なソリューションを提供します。

公式サイト：[https://theporndb.net/](https://theporndb.net/)

<!-- truncate -->

## コア特性

- 🎯 **自動照合**：動画ファイルをインテリジェントに識別し、対応するメタデータを自動的に照合します
- 🔧 **マルチモード実行**：サーバーモードとコマンドラインモードをサポートします
- 🌍 **マルチプラットフォーム互換**：Plex、Jellyfin などの主要メディアサーバーとシームレスに統合します
- 📦 **豊富なデータソース**：包括的な動画メタデータ情報を提供します
- 🔗 **Stash-Box サポート**：Stash-Box メタデータ管理システムと互換性があります

# Stash-Box

Stash-Box は Go 言語で開発された自己ホスト型メタデータ管理システムで、SFW（安全なコンテンツ）と NSFW（成人コンテンツ）の管理要件を同時に満たしながら、多様なコンテンツコレクションを整理して提供するように設計されています。

公式サイト：[https://docs.stashapp.cc/](https://docs.stashapp.cc/)

## プラグイン設定

### 前提条件

プラグインを設定する前に、以下の準備作業を完了する必要があります：

#### ThePornDB

##### アカウント登録

ThePornDB 公式登録ページにアクセスしてアカウントを作成します：

- 登録アドレス：[https://theporndb.net/register](https://theporndb.net/register)

![ThePornDB アカウント登録](/img/plugin/theporndb-04.png)

##### API キーの取得

登録が完了したら、アカウントにログインして API キーを取得します：

- API キー取得アドレス：[https://theporndb.net/user/api-tokens](https://theporndb.net/user/api-tokens)

#### Stash-Box

Stash-Box は Stash プロジェクトのメタデータ管理コンポーネントで、標準化されたメタデータストレージと検索サービスを提供します：

##### 公式インスタンス

Stash-Box 公式ドキュメントにアクセスして、サポートされているパブリックインスタンスを確認します：

- インスタンスリスト：[https://docs.stashapp.cc/metadata-sources/stash-box-instances/](https://docs.stashapp.cc/metadata-sources/stash-box-instances/)

:::info インスタンスの説明
このページでは、ThePornDB を含む Stash-Box がサポートするパブリックサイトを確認できます。公式ドキュメントに従ってプライベート Stash-Box インスタンスを自分でデプロイすることもできます。
:::

:::tip 互換性のヒント
ThePornDB は Stash-Box クライアントとしても使用でき、より豊富なメタデータ取得機能を提供します。
:::

![Stash-Box 設定](/img/plugin/theporndb-05.png)

##### API キーの取得

選択した Stash-Box インスタンスにログインし、ユーザー設定で API キーを生成して取得し、後続のクライアント設定に使用します。

### 設定情報

AMMDS 管理インターフェースで、「統合アプリ」→「メタデータ」→「ThePornDB」に進んで設定ページに入ります。

![ThePornDB プラグイン設定](/img/plugin/theporndb-01.png)

#### 基本設定パラメータ

| パラメータ | 説明 | デフォルト値 | 推奨 |
|------|------|--------|------|
| 起動状態 | ThePornDB プラグインを有効にするかどうかを制御 | オフ | 実際の要件に応じて有効にする |
| サービスアドレス | ThePornDB サービスのアクセスアドレス | `https://theporndb.net` | 公式アドレスは安定して信頼性があり、変更する必要はありません |
| キー | サービス認証に使用される ThePornDB API キー | - | 公式サイトから取得した API キーを入力 |

![ThePornDB 高度な設定](/img/plugin/theporndb-02.png)

#### 高度な設定パラメータ

| パラメータ | 説明 | デフォルト値 | 推奨 |
|------|------|--------|------|
| 知覚ハッシュ計算 | 動画の知覚ハッシュ計算機能を有効にするかどうか | オン | 元の動画ファイルに依存します。通常でない動画ファイルの場合は無効にすることをお勧めします |
| あいまいマッチング | ファイル名によるあいまいマッチングを行うかどうか | オフ | 知覚ハッシュ計算が無効になっている場合は有効にすることをお勧めします |

:::info 設定の説明
- 知覚ハッシュ計算は識別精度を向上させますが、システムリソースの消費を増加させます
- あいまいマッチングはファイル名は標準的だが動画ファイルが特殊なシナリオに適しています
:::

### Stash クライアント

Stash-Box クライアントを設定することで、より豊富なメタデータ情報を取得できます：

#### クライアントの追加

「クライアントを追加」ボタンをクリックして、Stash-Box クライアント設定インターフェースに入ります：

![Stash-Box クライアント設定](/img/plugin/theporndb-03.png)

#### 設定パラメータ

| パラメータ | 説明 | 設定の推奨 |
|------|------|----------|
| 有効化 | この Stash-Box クライアントを有効にするかどうかを制御 | 実際の要件に応じて有効にする |
| クライアント名 | カスタムクライアント識別名 | 識別しやすいようにサイト名を使用することをお勧めします |
| GraphQL アドレス | Stash-Box サイトの API アクセスアドレス | ドロップダウンから選択するか、完全な URL を手動で入力します |
| API キー | Stash-Box サイトのアクセスキー | 対応するサイトで生成した API キーを入力 |

#### 設定方法

1. **プリセットサイトの選択**：クライアント名のドロップダウンリストから公式プリセットの Stash-Box サイトを選択すると、システムが自動的に GraphQL アドレスを入力します
2. **手動設定**：カスタム Stash-Box インスタンスを追加する場合は、次の情報を手動で入力できます：
   - GraphQL アドレス：通常は `https://{site}/graphql` 形式です
   - API キー：対応する Stash-Box サイトのユーザー設定で生成

:::tip 設定の推奨
- より包括的なメタデータを取得するには、複数の Stash-Box クライアントを追加することをお勧めします
- 優先順位はメタデータ取得順序に影響します。要件に応じて調整できます
:::

### テストモジュール

テストモジュールは、プラグイン設定とサービス状態を検証するための以下の機能を提供します：

#### テスト機能

| 機能 | 説明 | 役割 |
|------|------|------|
| 接続テスト | ThePornDB サービスアドレスのネットワーク接続性を検証します | ネットワーク接続が正常であること、サービスアドレスが到達可能であることを確認します |
| ユーザー情報の取得 | ThePornDB アカウント情報を取得して表示しようとします | API キーが正しいかどうか、サービス認証が成功したかどうかを検証します |

#### 使用の推奨

- **設定前のテスト**：設定を保存する前に、接続状態をテストしてサービスアドレスが正しいことを確認することをお勧めします
- **API キーの検証**：ユーザー情報の取得機能を使用して、API キーの有効性を検証します
- **トラブルシューティング**：メタデータ取得に失敗した場合、テスト機能を使用して問題をすばやく特定できます

:::info テストの説明
- 接続テストはネットワーク接続性のみを検証し、サービス状態が正常であることを保証しません
- ユーザー情報の取得には有効な API キーとネットワーク接続が必要です
:::

## よくある質問

### サービス接続の失敗

**考えられる原因**：
- ネットワーク接続の問題
- サービスアドレスの設定エラー
- API キーの無効性

**解決策**：
- ネットワーク接続が正常かどうかを確認します
- サービスアドレスの形式が正しいかどうかを検証します
- API キーが期限切れかエラーかどうかを確認します
- 公式のデフォルトサービスアドレスを使用してみてください

### メタデータ取得の失敗

**考えられる原因**：
- 動画ファイルの命名が標準でない
- 知覚ハッシュ計算の失敗
- データソースサイトの一時的な利用不可

**解決策**：
- あいまいマッチング機能を有効にします
- 動画ファイル形式がサポートされているかどうかを確認します
- Stash-Box クライアントを変更してみてください
- 後で取得操作を再試行してください

### Stash-Box クライアント設定のエラー

**考えられる原因**：
- GraphQL アドレスの形式エラー
- API キーの権限不足
- サイトアクセス制限

**解決策**：
- GraphQL アドレスに完全なパスが含まれているかどうかを検証します
- API キーに十分な権限があることを確認します
- ネットワーク環境がそのサイトへのアクセスをサポートしているかどうかを確認します
- 他の Stash-Box インスタンスを使用してみてください

### パフォーマンスの問題

**考えられる原因**：
- 知覚ハッシュ計算によるシステムリソースの消費
- 複数のクライアントによる同時リクエスト
- ネットワーク遅延の高さ

**解決策**：
- パフォーマンスに制限のあるデバイスの場合は、知覚ハッシュ計算を無効にすることを検討してください
- クライアントの優先順位を適切に設定し、同時リクエストを避けます
- ネットワーク遅延の低い Stash-Box インスタンスを選択します

:::tip ベストプラクティス
- セキュリティを確保するために、API キーを定期的に更新してください
- リソースの無駄を避けるために、必要な Stash-Box クライアントのみを追加してください
- より包括的なメタデータを取得するために、ThePornDB と Stash-Box を組み合わせて使用してください
:::
